# -*- coding: utf-8 -*-
"""Project Graph First Dataset

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1ox1-P1fq4UGwnrcEtEGylLEZj3D9i81D
"""

import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt

# Function to load the CSV and extract the required rows and columns
def load_data(file_path):
    # Read the CSV file
    df = pd.read_csv(file_path)

    # Extract rows 5666 to 5670 and columns 3 to 55 (0-based indexing)
    functions_data = df.iloc[5666:5671, 3:56]  # Extracting the price data for the years 1970-2022
    function_names = df.iloc[5666:5671, 2]    # Extracting the function names (Column 3, zero-indexed)

    # Get the years (column headers from 1970 to 2022)
    years = [str(year) for year in range(1970, 2023)]

    return functions_data, function_names, years

# Title of the app
st.title("Price vs Time Plot for Multiple Functions")

# File uploader to upload the CSV file
uploaded_file = st.file_uploader("Upload your CSV file", type=["csv"])

if uploaded_file is not None:
    # Load the data
    functions_data, function_names, years = load_data(uploaded_file)

    # Plotting the functions
    fig, ax = plt.subplots(figsize=(10, 6))

    # Plot each function (5 functions in total)
    for i in range(5):
        ax.plot(years, functions_data.iloc[i, :], label=function_names.iloc[i], marker='o')

    # Set the labels and title
    ax.set_title("Price vs Time")
    ax.set_xlabel("Year")
    ax.set_ylabel("Price")

    # Add a legend
    ax.legend()

    # Show the plot
    ax.grid(True)

    # Display the plot in the Streamlit app
    st.pyplot(fig)